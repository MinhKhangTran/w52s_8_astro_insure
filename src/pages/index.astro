---
import Layout from "../layouts/Layout.astro";

import Hero from "../components/Hero.astro";
import Features from "../components/Features.astro";
import CTA from "../components/CTA.astro";

let title = "Astro Portfolio W52s #8";
let description = "Astro Portfolio W52s #8";
const permalink = Astro.site.href;
let canonicalURL = Astro.request.canonicalURL;
---

<Layout {title} {description} {permalink} current="index" {canonicalURL}>
  <main id="main-content">
    <Hero />
    <Features />
    <CTA />
  </main>
</Layout>

<script>
  const animations = [...document.querySelectorAll(".animate")];

  // create observer
  const callback = (entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add("visible");
      }

      if (!entry.isIntersecting && entry.boundingClientRect.top > 0) {
        entry.target.classList.remove("visible");
      }
    });
  };

  const observer = new IntersectionObserver(callback);

  // observe boxes

  animations.forEach((animation) => observer.observe(animation));
</script>
